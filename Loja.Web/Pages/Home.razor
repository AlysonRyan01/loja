@page "/"
@using Loja.Core.Models
@inherits HomePage
<PageTitle>TVS - Home</PageTitle>

<img src="images/banner.png" alt="banner" class="banner"/>
<div class="produtos">
    @if (IsBusy)
    {
        <MudProgressCircular Color="Color.Info" Indeterminate="true"/>
    }
    else
    {
        foreach (var produto in SearchService.ProdutosFiltrados)
        {
            <MudItem>
                <MudCard class="mudcard-principal-home">
                    <NavLink href="@($"/produto/{produto.Id}")">
                        <MudCardContent class="mudcardcontent-principal-home">
                            <h5 class="frete-info">FRETE GRÁTIS / 6x s/juros</h5>
                            <h3>@produto.Titulo</h3>
                        </MudCardContent>
                    </NavLink>

                    <MudCarousel class="carrossel-home" ShowArrows="true" EnableSwipeGesture="true" TData="Imagem" Indicators="true">
                        @foreach (var imagem in produto.Imagens)
                        {
                            var imagemUrl = $"{WebConfiguration.BackendUrl}{imagem.Url}";
                            <MudCarouselItem class="carrossel-item-home">
                                <img class="img-produto-carrossel-home" src="@imagemUrl" alt="sla"/>
                            </MudCarouselItem>
                        }
                    </MudCarousel>

                    <MudCardContent  Class="mudcardcontent-info-home">
                        <p class="produto-preco-antigo">De R$ @produto.Preco.ToString("F2")</p>
                        <p class="produto-preco-novo">Por R$ @produto.Preco.ToString("F2")</p>
                        <p class="desconto-pix">No PIX (5% de desconto)</p>
                        <p>Ou R$ @produto.Preco.ToString("F2") em até 6x s/ juros no cartão</p>

                        <div class="div-mudbuttons-comprar-carrinho">
                            <MudButton Color="Color.Primary" Variant="Variant.Filled" Class="mudbutton-comprar" Style="color: white;">
                                COMPRAR
                            </MudButton>

                            <MudButton OnClick="() => AdicionarAoCarrinho(produto.Id)" Color="Color.Primary" Variant="Variant.Outlined" Class="mudbutton-carrinho">
                                Adicionar ao Carrinho
                            </MudButton>
                        </div>
                    </MudCardContent>
                </MudCard>
            </MudItem>
        }
    }
</div>


